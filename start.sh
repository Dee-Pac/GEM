#!/bin/sh

this_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
this_file=`basename $0`
this_script="$this_dir/$this_file"
user_args=$@
user_args_count=$#

echo ""
echo "-----------------------------------------------------------------------------------------------"
echo "-------  Executing [$this_script $user_agrs]  -------"
echo "-----------------------------------------------------------------------------------------------"
echo ""

echo "-----------------------------------------------------------------------------------------------"
echo "Setting Global Environment ..."
echo "-----------------------------------------------------------------------------------------------"

GEM_HOME=$PWD
source ${GEM_HOME}/set_env.sh

echo "\n\n"
echo "***********************************************************************************************"
echo "*                                 Firing Up NEO4J ...                                         *"
echo "***********************************************************************************************"
echo "\n\n"

run_cmd "${GEM_NEO4J_HOME}/start.sh"

echo "\n\n"
echo "***********************************************************************************************"
echo "*                          Bootstrapping neo4j with GEM data ...                              *"
echo "***********************************************************************************************"
echo "\n\n"

run_cmd "${GEM_NEO4J_HOME}/bootstrap.sh"

echo "\n\n"
echo "***********************************************************************************************"
echo "*                                Firing up GraphQL ...                                        *"
echo "***********************************************************************************************"
echo "\n\n"

run_cmd "${GEM_API_HOME}/start.sh"

echo "\n\n"
echo "***********************************************************************************************"
echo "*                     SUCCESS | Starting Graph of Enterprise Metadata                         *"
echo "***********************************************************************************************"
echo "\n\n"

echo "${NEO4J_MESSAGE}"
echo "\n\n"
echo "${API_MESSAGE}"
echo "\n\n"
echo "***********************************************************************************************"
echo ""
